WindowManager:
    MainWindow:
    GameWindow:
    MainGameWindow:
    ShopGameWindow:

<MainWindow>:
    name: 'MainWindow'
    FloatLayout:
        canvas:
            Rectangle:
                source: 'Images/backgrounds/main_background.png'
                size: self.size
                pos: self.pos

        Image:
            source: 'Images/logo/main_logo.png'
            size_hint: (1, None)  # Растягиваем логотип по ширине родительского виджета, высота автоматически подстраивается
            height: self.width * self.texture_size[1] / self.texture_size[0]  # Рассчитываем высоту, чтобы сохранить пропорции
            pos_hint: {'center_x': 0.5, 'top': 1}  # Расположение логотипа сверху

        BoxLayout:
            orientation: 'vertical'
            size_hint: (0.6, None)
            size_hint_y: 0.5
            spacing: dp(15)
            pos_hint: {'center_x': 0.5, 'y': 0.1}  # Опускаем группу кнопок ниже

            Button:
                name: 'new_game'
                id: new_game_button
                size_hint_y: 0.9
                background_normal: 'Images/buttons/newGame/button_normal.png'
                background_down: 'Images/buttons/newGame/button_press.png'
                on_release: root.change_button_image(self)

            Button:
                name: 'continue_game'
                id: continue_button
                size_hint_y: 0.9
                background_normal: 'Images/buttons/continue/button_normal.png'
                background_down: 'Images/buttons/continue/button_press.png'
                on_press: root.change_button_image(self)

            Button:
                id: settings_button
                size_hint_y: 0.9
                background_normal: 'Images/buttons/settings/button_normal.png'
                background_down: 'Images/buttons/settings/button_press.png'
                on_press: root.change_button_image(self, self.background_normal, self.background_down)
                on_release: root.change_button_image(self)


            Button:
                id: exit_button
                size_hint_y: 0.9
                background_normal: 'Images/buttons/exit/button_normal.png'
                background_down: 'Images/buttons/exit/button_press.png'
                on_press: root.change_button_image(self, self.background_normal, self.background_down)
                on_release: root.change_button_image(self)

<GameWindow>:
    name: 'GameWindow'

    FloatLayout:

        canvas:
            Rectangle:
                source: 'Images/backgrounds/game_start_background.png'
                size: self.size
                pos: self.pos

        BoxLayout:
            orientation: 'horizontal'
            size_hint: 0.9, 0.1
            pos_hint: {'x': 0.05, 'top': 0.95}

            Image:
                source: 'Images/labels/label_name.png'
                size_hint_x: 0.4
                size_hint_y: 0.7
                size: self.texture_size

            TextInput:
                id: text_name
                font_size: 120
                background_color: 1, 1, 1, 1
                foreground_color: 0, 0, 0, 1
                size_hint_x: 0.6
                size_hint_y: 0.7
                font_name: 'fonts/EpilepsySansBold.ttf'
                canvas.before:
                    Color:
                        rgba: 0, 0, 0, 1
                    BoxShadow:
                        inset: True
                        pos: self.pos
                        size: self.size
                        offset: -5, 5
                        border_radius: 0, 0, 0, 0
                        blur_radius: 0

        BoxLayout:
            orientation: 'horizontal'
            size_hint: 0.9, 0.1
            pos_hint: {'x': 0.05, 'top': 0.85}

            Image:
                source: 'Images/labels/label_gender.png'
                size_hint_x: 0.4
                size_hint_y: 0.7
                size: self.texture_size

            Spinner:
                id: gender_spinner
                size_hint_x: 0.6
                size_hint_y: 0.7
                text: ''
                background_normal: 'Images/gender/normal.png'
                values: ['Мужской', 'Женский']
                on_text: root.changing_picture(self)

        BoxLayout:
            orientation: 'horizontal'
            size_hint: 0.9, 0.1
            pos_hint: {'x': 0.05, 'top': 0.75}

            Image:
                source: 'Images/labels/label_age.png'
                size_hint_x: 0.4
                size_hint_y: 0.7
                size: self.texture_size

            TextInput:
                id: text_age
                font_size: 120
                background_color: 1, 1, 1, 1
                foreground_color: 0, 0, 0, 1
                size_hint_x: 0.6
                size_hint_y: 0.7
                font_name: 'fonts/EpilepsySansBold.ttf'
                canvas.before:
                    Color:
                        rgba: 0, 0, 0, 1
                    BoxShadow:
                        inset: True
                        pos: self.pos
                        size: self.size
                        offset: -5, 5
                        border_radius: 0, 0, 0, 0
                        blur_radius: 0

        BoxLayout:
            orientation: 'horizontal'
            size_hint: 0.9, 0.1
            pos_hint: {'x': 0.05, 'top': 0.65}

            Image:
                source: 'Images/labels/label_profile.png'
                size_hint_x: 0.4
                size_hint_y: 0.7
                size: self.texture_size

            Spinner:
                id: profile_spinner
                size_hint_x: 0.6
                size_hint_y: 0.7
                text: ''
                background_normal: 'Images/profile/normal.png'
                values: ['ССО','СПО','СОП']
                on_text: root.changing_picture(self)

        BoxLayout:
            orientation: 'horizontal'
            size_hint: 0.9, 0.1
            pos_hint: {'x': 0.05, 'top': 0.55}

            Image:
                source: 'Images/labels/label_diffictly.png'
                size_hint_x: 0.4
                size_hint_y: 0.7
                size: self.texture_size

            Spinner:
                id: difficulty_spinner
                size_hint_x: 0.6
                size_hint_y: 0.7
                background_normal: 'Images/difficult/normal.png'
                text: ''
                values: ['Легко','Нормально','Сложно']
                on_text: root.changing_picture(self)

        BoxLayout:
            orientation: 'horizontal'
            size_hint: 0.9, 0.1
            pos_hint: {'x': 0.05, 'top': 0.45}

            Image:
                source: 'Images/labels/label_brigade_name.png'
                size_hint_x: 0.4
                size_hint_y: 0.7
                size: self.texture_size

            TextInput:
                id: text_name_brigade
                font_size: 120
                background_color: 1, 1, 1, 1
                foreground_color: 0, 0, 0, 1
                size_hint_x: 0.6
                size_hint_y: 0.7
                font_name: 'fonts/EpilepsySansBold.ttf'
                canvas.before:
                    Color:
                        rgba: 0, 0, 0, 1
                    BoxShadow:
                        inset: True
                        pos: self.pos
                        size: self.size
                        offset: -5, 5
                        border_radius: 0, 0, 0, 0
                        blur_radius: 0

        Button:
            id: new_game_button
            size_hint_x: 0.7
            size_hint_y: 0.1
            background_normal: 'Images/buttons/startGame/button_normal.png'
            background_down: 'Images/buttons/startGame/button_press.png'
            pos_hint: {'center_x': 0.5, 'y': 0.2}
            on_press: root.start_new_game(text_name,gender_spinner,text_age, profile_spinner, difficulty_spinner, text_name_brigade)

        Button:
            size_hint_x: 0.6
            size_hint_y: 0.08
            pos_hint: {'center_x': 0.5, 'y': 0.1}
            background_normal: 'Images/buttons/backToMainMenu/button_normal.png'
            background_down: 'Images/buttons/backToMainMenu/button_press.png'
            on_press: root.manager.current = 'MainWindow'

<MainGameWindow>:
    name: 'MainGameWindow'
    on_enter: root.fill_data(text_health, text_hunger, text_money, text_mood, text_populyarity, text_supermoney, text_post)
    FloatLayout:
        canvas:
            Rectangle:
                source: 'Images/backgrounds/main_game_background.png'
                size: self.size
                pos: self.pos

        BoxLayout:
            orientation: 'horizontal'
            size_hint_y: 0.1
            pos_hint:{'top': 1}

            BoxLayout:
                orientation: 'vertical'
                BoxLayout:
                    orientation: 'horizontal'
                    Image:
                        source: 'Images/Indicators/heatlh.png'
                        size: self.texture_size
                    Label:
                        id: text_health
                        text:'100'
                        font_name: 'fonts/EpilepsySansBold.ttf'
                        font_size: 100


                BoxLayout:
                    orientation: 'horizontal'
                    Image:
                        source: 'Images/Indicators/hunger.png'
                        size: self.texture_size
                    Label:
                        id: text_hunger
                        text:'100'
                        font_name: 'fonts/EpilepsySansBold.ttf'
                        font_size: 100

            BoxLayout:
                orientation: 'vertical'
                BoxLayout:
                    orientation: 'horizontal'
                    Image:
                        source: 'Images/Indicators/money.png'
                        size: self.texture_size
                    Label:
                        id:text_money
                        text:'100'
                        font_name: 'fonts/EpilepsySansBold.ttf'
                        font_size: 100
                BoxLayout:
                    orientation: 'horizontal'
                    Image:
                        source: 'Images/Indicators/mood.png'
                        size: self.texture_size
                    Label:
                        id:text_mood
                        text:'100'
                        font_name: 'fonts/EpilepsySansBold.ttf'
                        font_size: 100

            BoxLayout:
                orientation: 'vertical'
                BoxLayout:
                    orientation: 'horizontal'
                    Image:
                        source: 'Images/Indicators/populyarity.png'
                        size: self.texture_size
                    Label:
                        id:text_populyarity
                        text:'100'
                        font_name: 'fonts/EpilepsySansBold.ttf'
                        font_size: 100
                BoxLayout:
                    orientation: 'horizontal'
                    Image:
                        source: 'Images/Indicators/supermoney.png'
                        size: self.texture_size
                    Label:
                        id:text_supermoney
                        text:'100'
                        font_name: 'fonts/EpilepsySansBold.ttf'
                        font_size: 100
        BoxLayout:
            orientation: 'horizontal'
            pos_hint:{'x':0,'y': 0.35}
            Label:
                id: text_post
                text:''
                font_name: 'fonts/EpilepsySansBold.ttf'
                font_size: 80

        BoxLayout:
            orientation: 'horizontal'
            pos_hint:{'top': 0.8}
            size_hint_y: 0.4
            Image:
                source: 'Images/player/normal/normal.png'
                size: self.texture_size

        BoxLayout:
            orientation: 'horizontal'
            pos_hint:{'center_x': 0.5,'top': 0.35}
            size_hint_y: 0.25
            spacing: dp(15)
            size_hint_x: 0.9
            BoxLayout:
                id:button_collection
                orientation: 'vertical'
                spacing: dp(15)
                Button:
                    background_normal: 'Images/buttons/shop/button_normal.png'
                    background_down: 'Images/buttons/shop/button_press.png'
                    on_press: root.shop_screen()
                Button:
                    background_normal: 'Images/buttons/brigade/button_normal.png'
                    background_down: 'Images/buttons/brigade/button_press.png'
                Button:
                    background_normal: 'Images/buttons/profile/button_normal.png'
                    background_down: 'Images/buttons/profile/button_press.png'
            BoxLayout:
                orientation: 'vertical'
                spacing: dp(15)
                Button:
                    id:btn_work
                    background_normal: 'Images/buttons/work/button_normal.png'
                    background_down: 'Images/buttons/work/button_press.png'
                Button:
                    background_normal: 'Images/buttons/study/button_normal.png'
                    background_down: 'Images/buttons/study/button_press.png'
                    on_press:root.add_button2()
                Button:
                    background_normal: 'Images/buttons/event/button_normal.png'
                    background_down: 'Images/buttons/event/button_press.png'

        BoxLayout:
            orientation: 'horizontal'
            pos_hint:{'center_x': 0.5,'top': 0.08}
            size_hint_y: 0.07
            spacing: dp(15)
            size_hint_x: 0.9
            Button:
                background_normal: 'Images/buttons/main_menu/button_normal.png'
                background_down: 'Images/buttons/main_menu/button_press.png'
                on_press: root.manager.current = 'MainWindow'

<ShopGameWindow>:
    name: 'ShopGameWindow'
    FloatLayout:
        canvas:
            Rectangle:
                source: 'Images/backgrounds/main_game_background.png'
                size: self.size
                pos: self.pos

        spacing:dp(15)
        BoxLayout:
            orientation: 'vertical'
            spacing:dp(15)

            BoxLayout:
                orientation: 'horizontal'
                size_hint_y: 0.15

                BoxLayout:
                    orientation: 'vertical'

                    BoxLayout:
                        orientation: 'horizontal'
                        Image:
                            source: 'Images/Indicators/heatlh.png'
                            size: self.texture_size
                        Label:
                            id: text_health
                            text:'100'
                            font_name: 'fonts/EpilepsySansBold.ttf'
                            font_size: 90

                    BoxLayout:
                        orientation: 'horizontal'
                        Image:
                            source: 'Images/Indicators/hunger.png'
                            size: self.texture_size
                        Label:
                            id: text_health
                            text:'100'
                            font_name: 'fonts/EpilepsySansBold.ttf'
                            font_size: 90

                    BoxLayout:
                        orientation: 'horizontal'
                        Image:
                            source: 'Images/Indicators/money.png'
                            size: self.texture_size
                        Label:
                            id: text_health
                            text:'100'
                            font_name: 'fonts/EpilepsySansBold.ttf'
                            font_size: 90

                    BoxLayout:
                        orientation: 'horizontal'
                        Image:
                            source: 'Images/Indicators/mood.png'
                            size: self.texture_size
                        Label:
                            id: text_health
                            text:'100'
                            font_name: 'fonts/EpilepsySansBold.ttf'
                            font_size: 90

                    BoxLayout:
                        orientation: 'horizontal'
                        Image:
                            source: 'Images/Indicators/populyarity.png'
                            size: self.texture_size
                        Label:
                            id: text_health
                            text:'100'
                            font_name: 'fonts/EpilepsySansBold.ttf'
                            font_size: 90

                    BoxLayout:
                        orientation: 'horizontal'
                        Image:
                            source: 'Images/Indicators/supermoney.png'
                            size: self.texture_size
                        Label:
                            id: text_health
                            text:'100'
                            font_name: 'fonts/EpilepsySansBold.ttf'
                            font_size: 90


                Image:
                    id:player_image
                    source: 'Images/player/normal/normal.png'
                    size: self.texture_size
                    anim_delay: -1
                    anim_loop: 1
                    allow_stretch: True

            BoxLayout:
                id: list_button
                orientation:'vertical'
                pos_hint:{'center_x': 0.5,'top': 0.35}
                size_hint_y: 0.25
                size_hint_x: 1

                RecycleView:
                    id:listButtonView
                    viewclass: 'CustomButton'
                    #pos_hint:{'center_x': 0.5,'center_y': 0.5}
                    RecycleBoxLayout:
                        default_size: None, dp(56)
                        default_size_hint: 1, 1
                        size_hint_y: None
                        height: dp(1500)
                        orientation: 'vertical'


            BoxLayout:
                size_hint_y: 0.06
                orientation:'horizontal'
                spacing:dp(15)

                Button:
                    background_normal: 'Images/buttons/event/button_normal.png'
                    background_down: 'Images/buttons/event/button_press.png'
                    on_press: root.back()
